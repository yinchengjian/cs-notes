# 进程管理

## 进程和线程的区别

进程：进程是资源分配的基本单位，是应用程序的一次实例，PCB进程控制块使用来唯一描述一个进程的基本信息和运行状态。

线程：线程是资源调度的基本单位，一个进程可以包含多个线程，并且多个线程共用该进程的资源。

区别：

- 拥有资源：进程是资源分配的基本单位，线程不拥有资源，只是可以访问隶属进程的资源
- 调度：进程之间的调度会引起进程的切换，但是同一进程的线程之间的调度不会引起进程的切换
- 通信：进程之间的通信需要额外的IPC，同一进程内的线程之间可以直接通过同一资源进行通信
- 系统开销：进程创建销毁的开销比较大，系统需要为他分配内存，IO等，并且在进程切换的时候还需要保存进程的状态，线程只需要保存少量的寄存器即可。

## 进程的状态转换

状态：就绪状态，运行状态，阻塞状态

状态转换：当一个进程被创建出来，就进入了就绪状态，他在等待CPU的调度，等分配到了CPU，就进入了运行状态，在运行状态时，发现需要其他资源，但是其他资源又被其他进程占用时，此时会进入阻塞状态，

当等待的资源可用时，就会转换为就绪状态，再次等待CPU的调度。

## 进程调度

批处理系统：人为干涉不多，一般保证吞吐量和周期时间

先来先服务

短作业优先

交互式系统：时间片轮询，优先级调度，多级反馈队列

实时系统：调度要及时

## 进程同步

进程同步：是指多个进程合作完成目标，从而要多个进程按照一定的顺序来执行

临界区：多个进程对于同一资源的互斥访问，该资源就被称为临界区

同步互斥：同步是指多个进程有一定的先后顺序，互斥是指多个进程在同一时刻只有一个进程能访问临界区

信号量：用于对某个资源的访问控制，其实就是Java中的object.wait()/notify()，更准确的是指锁中的condition

当该条件满足时，才能访问相应资源，当只有1/0，就变成了互斥量。

生产者和消费者：在Java中最经典的例子就是ArrayBlockQueue阻塞队列，他内部就有一个锁（互斥量），以及两个condition对象（信号量），使用这三个对象来实现对于内部数组的访问控制

## 进程通信

管道：半双工，用于父子进程或者兄弟进程通信

命名管道：多用于服务器和客户端之间的进程通信

消息队列：把进程之间的通信可以异步化

共享内存：多个进程共享同一块内存，通过该内存进行通信

套接字：可以实现不同机器上进程的通信s





